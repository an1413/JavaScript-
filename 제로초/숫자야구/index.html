<!DOCTYPE html>
<html lang="ko-KR">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>숫자야구</title>
    </head>

    <body>

        <!-- <div>숫자야구 숫자제시</div>
        <form action="">
            <input type="text">
            <button>입력</button>
        </form>
        <div>정답 or 틀림!!</div> -->


        <script>

            let 숫자생성기;
            let 숫자문제;

            function 숫자뽑기() {
                숫자생성기 = [1, 2, 3, 4, 5, 6, 7, 8, 9];
                숫자문제 = [];

                for (let i = 0; i < 4; i++) {
                    let 랜덤숫자 = 숫자생성기.splice(Math.floor(Math.random() * (9 - i)), 1)[0];
                    숫자문제.push(랜덤숫자);
                }
            }

            숫자뽑기()
            console.log(숫자문제);
            const body = document.querySelector('body');
            const 숫자제시 = document.createElement('div');
            숫자제시.textContent = '숫자를 맞춰보세요';

            // 랜덤숫자 나와있음 = ex) 1392
            const form = document.createElement('form');
            const input = document.createElement('input');
            input.maxLength = 4;
            const button = document.createElement('button');
            button.textContent = '입력';

            const 정답 = document.createElement('div');

            body.append(숫자제시, form, 정답);

            form.append(input, button);


            var 틀린횟수 = 0;
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                if (숫자문제.join('') === input.value) {

                    console.log(input.value.split(''));
                    정답.textContent = '홈런 ~~!'
                    input.value = '';
                    input.focus();
                    console.log(input.value);

                    숫자뽑기();
                    틀린횟수 = 0;
                }
                else {  // 답이 틀렸을 때 스트라이크, 볼 알려주기
                    let 답배열 = input.value.split('');
                    let 스트라이크 = 0;
                    let 볼 = 0;
                    틀린횟수++;

                    if (틀린횟수 > 10) {
                        정답.textContent = `10번넘게 틀림!~ 정답은 ${숫자문제.join('')}입니다.`
                        숫자뽑기();
                        틀린횟수 = 0;
                    } else {
                        for (let i = 0; i < 3; i++) {
                            if (Number(답배열[i]) === 숫자문제[i]) { // 같은자리인지 확인
                                스트라이크++;
                                input.value = '';
                                input.focus();
                            } else if (숫자문제.indexOf(Number(답배열[i])) > -1) { // 같은 자리는 아니지만, 숫자가 겹치는지 확인
                                볼++;
                                input.value = '';
                                input.focus();
                            }
                            정답.textContent = `스트라이크 : ${스트라이크} 볼 : ${볼} 현재 ${10 - 틀린횟수}번의 기회가 남아있습니다.`
                            

                        }
                    }
                }
            })

        </script>
    </body>

</html>